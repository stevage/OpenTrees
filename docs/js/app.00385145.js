(function(e){function t(t){for(var i,n,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)n=o[d],s[n]&&p.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},r=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("64a9"),s=a.n(i);s.a},"0627":function(e,t,a){"use strict";var i=a("b62f"),s=a.n(i);s.a},"091f":function(e,t,a){"use strict";var i=a("f6bf"),s=a.n(i);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[e._m(0),a("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[a("div",{staticClass:"br b--gray overflow-auto",staticStyle:{width:"300px"},attrs:{id:"sidebar"}},[a("FeatureInfo")],1),a("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[a("Map"),a("div",{staticClass:"absolute ba b--gray shadow-3 ml2 mt2",attrs:{id:"overlay"}},[a("Mode"),a("Legend")],1)],1)]),e._m(1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bb b--gray bg-green",attrs:{id:"top"}},[a("img",{staticClass:"w2 dib fl ma2",attrs:{src:"cubetree-logo.png"}}),a("h1",{staticClass:"f1 ma2 lancelot dark-green dib fl"},[e._v("OpenTrees.org")]),a("h2",{staticClass:"f2 lancelot ml4 mb0 mt3 fl gray"},[e._v("893,493 open data trees")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bt b--light-gray flex-none pa1 shadow-3",attrs:{id:"bottom"}},[e._v("Created by "),a("a",{attrs:{href:"https://twitter.com/stevage1/"}},[e._v("Steve Bennett")]),e._v(". \nSource code on "),a("a",{attrs:{href:"https://github.com/stevage/OpenTrees"}},[e._v("Github")]),e._v(".\n"),a("a",{attrs:{href:"https://stevebennett.me/2015/04/07/opentrees-org-how-to-aggregate-373000-trees-from-9-open-data-sources/"}},[e._v("Blog post #1")]),e._v(" (2015). \n"),a("a",{attrs:{href:"https://stevebennett.me/2018/05/15/you-might-not-need-postgis-streamlined-vector-tile-processing-for-big-map-visualisations/"}},[e._v("Blog post #2")]),e._v(" (2018).")])}],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],l=a("a4bb"),c=a.n(l),u=(a("96cf"),a("3b8d")),d=a("75fc"),p=a("768b"),m=a("e192"),h=a.n(m),v=a("ef12"),g=a.n(v),f=new i["a"],_=(a("ac6d"),function(e){return e.reduce(function(e,t){var a=Object(p["a"])(t,2),i=a[0],s=a[1];return[].concat(Object(d["a"])(e),[i,s])},[])}),b={mounted:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:h.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJjazZzd3V2dXEwNGZlM2xtZzFnOXdkOTFtIn0.pKVxwqE61gNc7PKK5u1j6g",t=new h.a.Map({container:"map",center:[144.96,-37.81],zoom:14,style:"mapbox://styles/stevage/ck6sws4g704uu1iqtvn25gj6v",hash:!0}),t.addControl(new h.a.NavigationControl),g.a.init(t,h.a),window.map=t,window.app.Map=this,this.map=t,t.U.onLoad(function(){t.U.addVector("trees","mapbox://stevage.9slh6b3l"),t.U.addCircle("trees-vis-none","trees",{sourceLayer:"trees",circleColor:"hsla(80,50%,70%,0.5)",circleRadius:{stops:[[10,4],[12,6]]},circleOpacity:.5}),t.U.addCircle("trees-inner","trees",{sourceLayer:"trees",circleColor:"hsl(100,70%,20%)",circleRadius:{stops:[[10,1],[12,2]]}}),t.U.addCircle("trees-vis-species","trees",{sourceLayer:"trees",circleColor:["case"].concat(Object(d["a"])(_(y.species.map(function(e){var t=Object(p["a"])(e,3),a=(t[0],t[1]),i=t[2];return[i,a]}))),["black"]),circleRadius:{stops:[[12,2],[17,6]]},circleOpacity:["interpolate",["linear"],["zoom"],13,.5,17,1]}),t.U.addCircle("trees-vis-rarity","trees",{sourceLayer:"trees",circleRadius:{stops:[[12,2],[17,6]]},circleColor:["case"].concat(Object(d["a"])(_(y.rarity.map(function(e){var t=Object(p["a"])(e,3),a=(t[0],t[1]),i=t[2];return[i,a]}))),["#ddd"]),circleOpacity:["interpolate",["linear"],["zoom"],13,.5,17,1]}),t.U.addCircle("trees-vis-noxious","trees",{sourceLayer:"trees",circleRadius:{stops:[[12,2],[17,6]]},circleColor:["case"].concat(Object(d["a"])(_(y.noxious.map(function(e){var t=Object(p["a"])(e,3),a=(t[0],t[1]),i=t[2];return[i,a]}))),["transparent"])}),a.switchMode("none")}),t.U.hoverPointer(["trees-inner"].concat(Object(d["a"])(C))),t.U.clickLayer(["trees-inner"].concat(Object(d["a"])(C)),function(e){console.log(e),window.app.FeatureInfo.feature=e.features[0]}),f.$on("vis-mode",this.switchMode);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{switchMode:function(e){this.map.U.hide(C),this.map.U.show("trees-vis-".concat(e)),console.log(e),f.$emit("update-legend",y[e])}}},y={none:[],species:[["Eucalyptus","hsl(90,90%,30%)",["in",["get","genus"],["literal",["Eucalyptus"]]]],["Corymbia,  Angophora","hsl(90,30%,60%)",["in",["get","genus"],["literal",["Corymbia","Angophora"]]]],["Lophostemon","hsl(90,90%,60%)",["in",["get","genus"],["literal",["Lophostemon"]]]],["Grevilleas, proteas, banksias","hsl(120,60%,50%)",["in",["get","genus"],["literal",["Grevillea","Grevillia","Banksia","Stenocarpus"]]]],["Melaleucas and callistemons","hsl(200, 60%,50%)",["in",["get","genus"],["literal",["Melaleuca","Callistemon"]]]],["(Allo)Casuarinas","hsl(180, 90%,60%)",["in",["get","genus"],["literal",["Casuarina","Allocasuarina"]]]],["Other natives","hsl(160, 90%, 30%)",["any",["in",["get","genus"],["literal",["Hakea","Agonis","Tristaniopsis","Lagunaria","Acacia","Hymenosporum","Brachychiton","Leptospermum","Waterhousea","Bursaria","Geijera","Paraserianthes","Myoporum","Exocarpos","Exocarpus","Jacksonia"]]],["all",["in",["get","genus"],["literal",["Acmena","Syzygium"]]],["in",["get","species"],["literal",["smithii"]]]],["in",["get","scientific"],["literal",["Pittosporum undulatum","Cupaniopsis anacardioides","Acmena smithii","Acmena smithii (Syzygium smithii)","Syzygium australe"]]]]],["Planes","hsl(0,86%,60%)",["in",["get","genus"],["literal",["Platanus","Plantanus"]]]],["Elms","hsl(30,60%,60%)",["in",["get","genus"],["literal",["Ulmus","Celtis"]]]],["Oaks & maples","hsl(330, 60%,60%)",["in",["get","genus"],["literal",["Quercus","Acer"]]]],["Palms","hsl(40, 100%,70%)",["in",["get","genus"],["literal",["Phoenix","Washingtonia","Jubaea","Chamaerops","Syagrus","Livistona","Trachycarpus"]]]],["Conifers","hsl(60,90%,45%)",["in",["get","genus"],["literal",["Pinus","Araucaria","Cupressus","Cupressocyparis","Podocarpus","Platycladus","Thuja","Hesperocyparis","Callitris","Cedrus","Picea","Abies","Cunninghamia","Chamaecyparis","Sequoiadendron","Sequoia","Thujopsis"]]]],["Pears, plums and other fruits","hsl(250,60%,60%)",["in",["get","genus"],["literal",["Pyrus","Prunus","Malus","Citrus"]]]],["Figs","hsl(0,0%,40%)",["in",["get","genus"],["literal",["Ficus"]]]],["Ashes","hsl(0,0%,20%)",["in",["get","genus"],["literal",["Fraxinus"]]]],["Other exotics","hsl(310, 90%,60%)",["any",["in",["get","genus"],["literal",["Betula","Liquidambar","Gleditsia","Robinia","Pseudotsuga","Alnus","Laburnum","Eriobotrya","Olea","Schinus","Photinia","Laurus","Populus","Ligustrum","Cotoneaster","Nerium","Pyracantha","Zelkova","Jacaranda","Metrosideros","Pistacia","Pistachia","Arbutus","Crataegus","Koelreuteria","Morus","Cinnamomum","Virgilia","Salix","Ceratonia","Cercis","Tilia","Ginkgo","Magnolia","Melia","Afrocarpus","Michelia","Sophora","Carpinus","Fagus","Sorbus","Liriodendron","Ilex","Aesculus","Viburnum","Genista"]]],["in",["get","species"],["literal",["indica","eugenioides","japonicus","japonica"]]],["in",["get","scientific"],["literal",["Agathis robusta","Pittosporum tenuifolium","Agathis australis","Cordyline australis","Hibiscus syriacus"]]]]]],rarity:[["Super common","hsl(210, 90%,60%)",[">=",["get","species_count"],1e4]],["Very common","hsl(160, 90%,60%)",["all",[">=",["get","species_count"],1e3],["<",["get","species_count"],1e4]]],["Common","hsl(120, 80%,60%)",["all",[">=",["get","species_count"],100],["<",["get","species_count"],1e3]]],["Average","hsl(60, 80%,50%)",["all",[">=",["get","species_count"],20],["<",["get","species_count"],100]]],["Rare","hsl(30, 80%, 50%)",["all",[">=",["get","species_count"],5],["<",["get","species_count"],20]]],["Very rare","hsl(0, 100%, 40%)",["<",["get","species_count"],5]]],noxious:[["Odour","hsl(240, 90%,60%)",["in",["get","scientific"],["literal",["Pyrus calleryana"]]]],["Allergy","hsl(10, 90%,60%)",["in",["get","scientific"],["literal",["Platanus x acerifolia","Platanus acerifolia"]]]],["Skin irritation","hsl(60, 90%,40%)",["in",["get","genus"],["literal",["Lagunaria"]]]],["Poisonous","hsl(300, 90%,50%)",["any",["in",["get","genus"],["literal",["Nerium"]]],["in",["get","scientific"],["literal",["Melia azedarach"]]]]],["Poisonous for dogs","hsl(300, 30%,40%)",["any",["in",["get","scientific"],["literal",["Prunus serrulata","Cotoneaster glaucophylla"]]],["in",["get","species"],["literal","pseudoacacia"]]],["in",["get","genus"],["literal",["Quercus"]]]]]},C=c()(y).map(function(e){return"trees-vis-".concat(e)}),w=b,x=a("2877"),P=Object(x["a"])(w,n,o,!1,null,"69ed3a59",null);P.options.__file="Map.vue";var k=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.feature?a("div",[a("h2",{staticClass:"i lancelot f3 bg-green pa2 mt0"},[e._v(e._s(e.p.common||e.p.scientific))]),e.feature?a("table",{staticClass:"bg-white helvetica ma1",attrs:{id:"FeatureInfo"}},[e.p.scientific?a("tr",[a("th",[e._v("Scientific name")]),a("td",[e._v(e._s(e.p.scientific))])]):e._e(),e.p.common?a("tr",[a("th",[e._v("Common name")]),a("td",[e._v(e._s(e.p.common))])]):e._e(),e.p.variety?a("tr",[a("th",[e._v("Variety")]),a("td",[e._v(e._s(e.p.variety))])]):e._e(),e.p.dbh?a("tr",[a("th",[e._v("Diameter")]),a("td",[e._v(e._s(e.p.dbh))])]):e._e(),e.p.height?a("tr",[a("th",[e._v("Height")]),a("td",[e._v(e._s(e.p.height))])]):e._e(),e.p.planted?a("tr",[a("th",[e._v("Planted")]),a("td",[e._v(e._s(e.p.planted))])]):e._e(),e.p.maturity?a("tr",[a("th",[e._v("Maturity")]),a("td",[e._v(e._s(e.p.maturity))])]):e._e(),e.p.species_count?a("tr",[a("th",[e._v("Count")]),a("td",[e._v(e._s(e.p.species_count.toLocaleString())+" similar trees")])]):e._e(),e.p.ref?a("tr",[a("th",[e._v("ID")]),a("td",[e._v(e._s("#"+e.p.ref))])]):e._e()]):e._e(),a("Wikipedia",{attrs:{searchTerm:e.p.scientific}})],1):a("div",[e._v("Click on a tree for information!")])])},j=[],M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.searchTerm,expression:"searchTerm"}],staticClass:"pa2",attrs:{id:"Wikipedia"}},[e.text?a("div",[a("img",{attrs:{src:e.imageUrl}}),a("p",{domProps:{innerHTML:e._s(e.text)}}),a("p",[a("small",[e._v("Read more on "),a("a",{attrs:{href:"http://en.wikipedia.org/wiki/"+encodeURIComponent(e.title)}},[e._v("Wikipedia")])])])]):e.loading?a("div",[a("p",{staticClass:"i"},[e._v("Looking up Wikipedia...")])]):a("div",[a("p",[e._v("Nothing found on Wikipedia.")])])])},L=[],S=(a("a481"),a("bc3a")),A=a.n(S),T={name:"Wikipedia",data:function(){return{imageUrl:void 0,text:void 0,title:void 0,loading:!1}},props:["searchTerm"],created:function(){window.Wikipedia=this},watch:{searchTerm:function(){var e=this;this.text=void 0,this.title=void 0,this.imageUrl=void 0,this.loading=!0;var t="https://cors-anywhere.herokuapp.com/",a=t+"http://en.wikipedia.org/w/api.php?action=query&format=json",i=a+"&prop=extracts&redirects&titles=",s=a+"&prop=pageimages&redirects&titles=";console.log("Searching Wikipedia for: "+this.searchTerm),A.a.get(s+encodeURIComponent(this.searchTerm)).then(function(t){var a=t.data.query.pages,i=a[c()(a)[0]];if(i&&i.thumbnail&&i.thumbnail.source){var s=i.thumbnail.source.replace(/\/\d\dpx-/,window.devicePixelRatio>1?"/600px-":"/300px-");e.imageUrl=s}}),A.a.get(i+encodeURIComponent(this.searchTerm)).then(function(t){e.loading=!1;var a=t.data.query.pages,i=a[c()(a)[0]];i&&i.extract?(e.title=i.title,e.text=i.extract):(e.imageUrl=void 0,e.text=void 0)})}}},U=T,E=(a("091f"),Object(x["a"])(U,M,L,!1,null,null,null));E.options.__file="Wikipedia.vue";var I=E.exports,R={name:"FeatureInfo",data:function(){return{feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}},components:{Wikipedia:I},computed:{p:function(){return this.feature&&this.feature.properties||{}},imageUrl:function(){return this.p&&this.p.image_url}},created:function(){window.app.FeatureInfo=this}},F=R,$=(a("9706"),a("0627"),Object(x["a"])(F,O,j,!1,null,"39724df6",null));$.options.__file="FeatureInfo.vue";var q=$.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-white pa1",attrs:{id:"Mode"}},[a("div",{staticClass:"pa0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],staticClass:"ma1 dib",attrs:{id:"none",type:"radio",value:"none"},domProps:{checked:e._q(e.mode,"none")},on:{change:function(t){e.mode="none"}}}),a("label",{staticClass:"pa1 dib",attrs:{for:"none"}},[e._v("No vis.")])]),a("div",{staticClass:"pa0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],staticClass:"ma1 dib",attrs:{id:"species",type:"radio",value:"species"},domProps:{checked:e._q(e.mode,"species")},on:{change:function(t){e.mode="species"}}}),a("label",{staticClass:"pa1 dib",attrs:{for:"species"}},[e._v("Species")])]),a("div",{staticClass:"pa0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],staticClass:"ma1 dib",attrs:{id:"rarity",type:"radio",value:"rarity"},domProps:{checked:e._q(e.mode,"rarity")},on:{change:function(t){e.mode="rarity"}}}),a("label",{staticClass:"pa1 dib",attrs:{for:"rarity"}},[e._v("Rarity")])]),a("div",{staticClass:"pa0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],staticClass:"ma1 dib",attrs:{id:"noxious",type:"radio",value:"noxious"},domProps:{checked:e._q(e.mode,"noxious")},on:{change:function(t){e.mode="noxious"}}}),a("label",{staticClass:"pa1 dib",attrs:{for:"noxious"}},[e._v("Harm")])])])},W=[],z={name:"Mode",data:function(){return{mode:"none"}},created:function(){window.Mode=this},watch:{mode:function(){f.$emit("vis-mode",this.mode)}}},G=z,V=Object(x["a"])(G,N,W,!1,null,"424123c6",null);V.options.__file="Mode.vue";var B=V.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.vals.length?a("div",{staticClass:"bg-white pa2",attrs:{id:"Legend"}},e._l(e.vals,function(t){var i=t[0],s=t[1];return a("div",{staticClass:"mb2"},[a("div",{staticClass:"pill br4 b--gray dib ba w1 h1 mr2 v-mid",style:{background:s}}),a("span",{staticClass:"f6"},[e._v(e._s(i))])])}),0):e._e()},J=[],Z={name:"Legend",data:function(){return{vals:[]}},created:function(){var e=this;window.Legend=this,f.$on("update-legend",function(t){e.vals=t})}},K=Z,D=Object(x["a"])(K,H,J,!1,null,"604e74e4",null);D.options.__file="Legend.vue";var Q=D.exports;window.app={};var X={name:"app",components:{Map:k,FeatureInfo:q,Mode:B,Legend:Q},created:function(){window.app.App=this}};a("948e");var Y=X,ee=(a("034f"),Object(x["a"])(Y,s,r,!1,null,null,null));ee.options.__file="App.vue";var te=ee.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(te)}}).$mount("#app")},"64a9":function(e,t,a){},9706:function(e,t,a){"use strict";var i=a("ad11"),s=a.n(i);s.a},ad11:function(e,t,a){},b62f:function(e,t,a){},f6bf:function(e,t,a){}});
//# sourceMappingURL=app.00385145.js.map